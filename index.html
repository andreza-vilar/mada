<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Carnaval 2026 !</title>

        <!-- FAVICON -->
    <link rel="icon" type="image/jpeg" href="mascara.jpg">
    
    <script src="https://cdn.tailwindcss.com"></script>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Anton&family=Londrina+Solid:wght@400;900&family=Inter:wght@400;700&display=swap" rel="stylesheet">
    
    <style>
        /* ESTILOS GERAIS - TEMA CARNAVAL RECIFE/OLINDA */
        :root {
            --bg-color: #1a0d1a;
            --card-bg: #2d1a2d;
            --accent-yellow: #FFD700;
            --accent-red: #FF1744;
            --accent-blue: #0066FF;
            --accent-green: #00FF88;
            --accent-pink: #FF1493;
            --accent-orange: #FF6B35;
            --text-color: #ffffff;
        }

        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, #1a0d1a 0%, #2d1a2d 50%, #1a0d1a 100%);
            background-image: 
                radial-gradient(circle at 20% 30%, rgba(255, 215, 0, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 80% 70%, rgba(255, 20, 147, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 50% 50%, rgba(0, 102, 255, 0.05) 0%, transparent 50%);
            background-size: 100% 100%;
            color: var(--text-color);
            overflow-x: hidden;
            position: relative;
        }

        /* Sombrinhas de Frevo animadas no background */
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: 
                url("data:image/svg+xml,%3Csvg width='100' height='100' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M50 20 L60 50 L50 80 L40 50 Z' fill='%23FFD700' opacity='0.2'/%3E%3Cpath d='M50 20 L55 35 L50 50 L45 35 Z' fill='%23FF1744' opacity='0.2'/%3E%3C/svg%3E"),
                url("data:image/svg+xml,%3Csvg width='100' height='100' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M50 20 L60 50 L50 80 L40 50 Z' fill='%230066FF' opacity='0.15'/%3E%3Cpath d='M50 20 L55 35 L50 50 L45 35 Z' fill='%23FF1493' opacity='0.15'/%3E%3C/svg%3E"),
                url("data:image/svg+xml,%3Csvg width='100' height='100' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M50 20 L60 50 L50 80 L40 50 Z' fill='%2300FF88' opacity='0.2'/%3E%3Cpath d='M50 20 L55 35 L50 50 L45 35 Z' fill='%23FF6B35' opacity='0.2'/%3E%3C/svg%3E");
            background-size: 200px 200px, 150px 150px, 180px 180px;
            background-position: 0 0, 100px 100px, 200px 50px;
            animation: frevo-float 20s ease-in-out infinite;
            pointer-events: none;
            z-index: 0;
        }

        @keyframes frevo-float {
            0%, 100% { transform: translateY(0) rotate(0deg); }
            25% { transform: translateY(-20px) rotate(5deg); }
            50% { transform: translateY(-10px) rotate(-5deg); }
            75% { transform: translateY(-15px) rotate(3deg); }
        }

        .main-title {
            font-family: 'Londrina Solid', cursive;
            font-weight: 900; 
            text-transform: uppercase; 
            position: relative; 
            color: var(--accent-yellow);
            text-shadow: 
                3px 3px 0px var(--accent-red),
                6px 6px 0px var(--accent-blue),
                0 0 20px rgba(255, 215, 0, 0.5);
            animation: title-pulse 2s ease-in-out infinite;
        }
        
        @keyframes title-pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.02); }
        }

        @keyframes carnaval-shake { 
            0%, 100% { transform: translate(0, 0) rotate(0deg); } 
            10% { transform: translate(-2px, 2px) rotate(-1deg); } 
            20% { transform: translate(2px, -2px) rotate(1deg); } 
            30% { transform: translate(-2px, 2px) rotate(-1deg); } 
            40% { transform: translate(2px, -2px) rotate(1deg); } 
            50% { transform: translate(-2px, 2px) rotate(-1deg); } 
            60% { transform: translate(2px, -2px) rotate(1deg); } 
            70% { transform: translate(-2px, 2px) rotate(-1deg); } 
            80% { transform: translate(2px, -2px) rotate(1deg); } 
            90% { transform: translate(-2px, 2px) rotate(-1deg); } 
        }
        
        .filter-btn { 
            font-family: 'Londrina Solid', cursive; 
            font-size: 1.1rem; 
            text-transform: uppercase; 
            background: linear-gradient(135deg, var(--accent-yellow), var(--accent-orange));
            color: #000; 
            border: 3px solid var(--accent-red); 
            border-radius: 12px; 
            transition: all 0.3s ease-in-out; 
            position: relative;
            box-shadow: 4px 4px 0px var(--accent-blue), 8px 8px 0px var(--accent-pink);
            font-weight: bold;
        }
        .filter-btn:hover { 
            transform: translateY(-3px) translateX(-3px); 
            box-shadow: 6px 6px 0px var(--accent-blue), 12px 12px 0px var(--accent-pink);
            animation: carnaval-shake 0.5s ease-in-out;
        }
        .filter-btn.active { 
            background: linear-gradient(135deg, var(--accent-red), var(--accent-pink));
            color: #fff;
            box-shadow: 4px 4px 0px var(--accent-yellow), 8px 8px 0px var(--accent-green);
        }

        /* PÃGINA DE ARTISTAS */
        .artist-card { 
            background: linear-gradient(135deg, var(--card-bg), rgba(255, 215, 0, 0.1)); 
            border: 4px solid var(--accent-yellow); 
            box-shadow: 
                6px 6px 0px var(--accent-red),
                12px 12px 0px var(--accent-blue);
            transition: all 0.3s ease-out; 
            transform: rotate(var(--rotation, 0deg));
            position: relative;
            overflow: hidden;
        }
        .artist-card::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255, 215, 0, 0.1) 0%, transparent 70%);
            animation: card-shine 3s ease-in-out infinite;
        }
        @keyframes card-shine {
            0%, 100% { transform: rotate(0deg); }
            50% { transform: rotate(180deg); }
        }
        .artist-card-link:hover .artist-card { 
            transform: translateY(-15px) scale(1.1) rotate(0deg) !important; 
            box-shadow: 
                8px 8px 0px var(--accent-red),
                16px 16px 0px var(--accent-blue),
                24px 24px 0px var(--accent-green);
            border-color: var(--accent-green);
            z-index: 10; 
            position: relative; 
        }
        
        /* PÃGINA DE HORÃRIOS */
        .schedule-page { 
            background: linear-gradient(135deg, rgba(26, 13, 26, 0.8), rgba(45, 26, 45, 0.8)); 
            backdrop-filter: blur(10px); 
            position: relative;
            border: 3px solid var(--accent-yellow);
            border-radius: 12px;
            box-shadow: 0 0 30px rgba(255, 215, 0, 0.3);
        }
        .schedule-grid { display: flex; flex-direction: column; gap: 1rem; }
        .schedule-time-group { margin-bottom: 2rem; }
        .schedule-time-header { 
            font-family: 'Anton', sans-serif; 
            font-size: 1.5rem; 
            color: var(--accent-yellow); 
            text-shadow: 2px 2px 0px var(--accent-red);
            margin-bottom: 1rem;
            padding-bottom: 0.5rem;
            border-bottom: 3px solid var(--accent-yellow);
        }
        .schedule-city-section { margin-bottom: 1.5rem; }
        .schedule-city-header {
            font-family: 'Anton', sans-serif;
            font-size: 1.2rem;
            padding: 0.5rem 1rem;
            border-radius: 8px;
            margin-bottom: 0.75rem;
            display: inline-block;
        }
        .schedule-blocks-list {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 1rem;
        }
        /* Estilos antigos removidos - agora usando lista */
        .show-card { 
            padding: 1rem; 
            overflow: visible; 
            position: relative; 
            color: white; 
            border-radius: 12px; 
            transition: all 0.3s ease; 
            cursor: pointer;
            border: 3px solid rgba(255,255,255,0.4);
            box-shadow: 4px 4px 0px rgba(0,0,0,0.3);
            min-height: 120px;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }
        .show-card:hover { 
            transform: translateY(-4px) scale(1.02); 
            z-index: 10;
            box-shadow: 6px 6px 0px rgba(0,0,0,0.5), 0 0 25px rgba(255, 215, 0, 0.6);
            border-color: var(--accent-yellow);
        }
        .attendees-container { display: flex; flex-direction: row; flex-wrap: wrap; gap: 0.5rem; align-items: center; }
        .attendee-bubble { 
            width: 28px; 
            height: 28px; 
            border-radius: 50%; 
            border: 2px solid var(--accent-yellow); 
            background-size: cover; 
            background-position: center; 
            box-shadow: 0 0 8px var(--accent-red); 
            margin-left: -12px; 
        }
        .day-toggle-btn { 
            font-family: 'Anton', sans-serif; 
            font-size: 1.5rem; 
            background: linear-gradient(135deg, #444, #222); 
            color: #aaa; 
            padding: 0.5rem 1.5rem; 
            transition: all 0.3s ease;
            border: 3px solid #666;
            border-radius: 8px;
            box-shadow: 3px 3px 0px rgba(0,0,0,0.3);
        }
        .day-toggle-btn.active { 
            background: linear-gradient(135deg, var(--accent-yellow), var(--accent-orange)); 
            color: #000;
            border-color: var(--accent-red);
            box-shadow: 4px 4px 0px var(--accent-red);
            font-weight: bold;
        }
        /* Time separator removido - nÃ£o mais necessÃ¡rio */

        /* MODAL / POP-UP */
        .modal-overlay { 
            position: fixed; 
            top: 0; 
            left: 0; 
            width: 100%; 
            height: 100%; 
            background: linear-gradient(135deg, rgba(26, 13, 26, 0.9), rgba(45, 26, 45, 0.9)); 
            backdrop-filter: blur(10px); 
            z-index: 40; 
            display: flex; 
            justify-content: center; 
            align-items: center; 
        }
        .modal-content { 
            background: linear-gradient(135deg, var(--card-bg), rgba(255, 215, 0, 0.1)); 
            border: 4px solid var(--accent-yellow); 
            padding: 2rem; 
            border-radius: 16px; 
            max-width: 90%; 
            width: 500px; 
            position: relative;
            box-shadow: 
                8px 8px 0px var(--accent-red),
                16px 16px 0px var(--accent-blue),
                0 0 40px rgba(255, 215, 0, 0.4);
        }
        .modal-close-btn { 
            position: absolute; 
            top: -15px; 
            right: -15px; 
            background: linear-gradient(135deg, var(--accent-red), var(--accent-pink)); 
            color: #fff; 
            border-radius: 50%; 
            width: 35px; 
            height: 35px; 
            font-weight: bold; 
            cursor: pointer; 
            border: 3px solid var(--accent-yellow);
            box-shadow: 3px 3px 0px rgba(0,0,0,0.3);
            transition: all 0.2s ease;
        }
        .modal-close-btn:hover {
            transform: scale(1.1) rotate(90deg);
        }

        /* Estilo para o botÃ£o de mÃºsica */
        .music-toggle {
            position: fixed;
            bottom: 1.5rem;
            right: 1.5rem;
            width: 4rem;
            height: 4rem;
            background: linear-gradient(135deg, var(--accent-yellow), var(--accent-orange));
            border: 4px solid var(--accent-red);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: 
                4px 4px 0px var(--accent-blue),
                8px 8px 0px var(--accent-green);
            transition: all 0.3s ease-in-out;
            z-index: 100;
            animation: music-pulse 2s ease-in-out infinite;
        }
        @keyframes music-pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }
        .music-toggle:hover {
            transform: translateY(-4px) translateX(-4px) scale(1.1);
            box-shadow: 
                6px 6px 0px var(--accent-blue),
                12px 12px 0px var(--accent-green),
                0 0 30px rgba(255, 215, 0, 0.6);
            animation: none;
        }
        .music-toggle svg {
            width: 1.8rem;
            height: 1.8rem;
            fill: #000;
            filter: drop-shadow(2px 2px 0px rgba(255,255,255,0.5));
        }

    </style>
</head>
<body class="pb-16">

    <div class="container mx-auto p-4 md:p-8" style="position: relative; z-index: 1;">
        
        <header class="text-center mb-8">
            <!-- Container flex para alinhar a logo e o tÃ­tulo -->
            <div class="flex justify-center items-center gap-4">
                <img src="bonecoOlinda.jpg" alt="Boneco de Olinda" class="h-16 md:h-20" style="filter: drop-shadow(3px 3px 0px var(--accent-red)) drop-shadow(6px 6px 0px var(--accent-blue));">
                <h1 class="main-title text-5xl md:text-7xl tracking-tighter" data-text="Carnaval 2026 !">Carnaval 2026 !</h1>
            </div>
            <p class="text-lg font-bold mt-2" style="color: var(--accent-yellow); text-shadow: 2px 2px 0px var(--accent-red);">ğŸ‰ Nosso roteiro de blocos para o carnaval ğŸ‰</p>
        </header>
        
        <nav class="flex justify-center gap-4 mb-8">
            <button id="view-artists-btn" class="filter-btn active px-6 py-2">Blocos</button>
            <button id="view-schedule-btn" class="filter-btn px-6 py-2">HorÃ¡rios</button>
        </nav>

        <!-- ÃREA DO USUÃRIO -->
        <div class="flex justify-end mb-4">
            <button id="login-btn" class="filter-btn px-4 py-2" onclick="showLoginModal()">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="currentColor" class="inline mr-2">
                    <path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/>
                </svg>
                Entrar
            </button>
            
            <div id="user-info" class="hidden items-center gap-3">
                <img id="user-avatar" src="" alt="Avatar" class="w-10 h-10 rounded-full border-3" style="border-color: var(--accent-yellow); box-shadow: 0 0 10px var(--accent-red);">
                <span id="user-name" class="text-white font-bold" style="text-shadow: 2px 2px 0px var(--accent-red);"></span>
                <button onclick="logout()" class="text-yellow-300 hover:text-yellow-100 text-sm font-bold" style="text-shadow: 1px 1px 0px var(--accent-red);">Sair</button>
            </div>
        </div>

        <!-- PÃGINA PRINCIPAL (Artistas + HorÃ¡rios) -->
        <div id="main-content">
            <div id="artists-page">
                <main id="artist-grid" class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-6 md:gap-8">
                    <!-- Cards dos artistas -->
                </main>
            </div>
            <div id="schedule-page" class="hidden schedule-page p-4 rounded-lg">
                <nav class="flex justify-center gap-1 my-4 flex-wrap">
                    <button id="day-thursday-btn" class="day-toggle-btn">Quinta (12/02)</button>
                    <button id="day-friday-btn" class="day-toggle-btn">Sexta (13/02)</button>
                    <button id="day-saturday-btn" class="day-toggle-btn">SÃ¡bado (14/02)</button>
                    <button id="day-sunday-btn" class="day-toggle-btn">Domingo (15/02)</button>
                    <button id="day-monday-btn" class="day-toggle-btn">Segunda (16/02)</button>
                    <button id="day-tuesday-btn" class="day-toggle-btn">TerÃ§a (17/02)</button>
                    <button id="day-wednesday-btn" class="day-toggle-btn">Quarta (15/02)</button>
                </nav>
                <div id="schedule-grid-container" class="schedule-grid">
                    <!-- Agenda de horÃ¡rios -->
                </div>
            </div>
        </div>

        <!-- PÃGINA DE DETALHES DO ARTISTA (Oculta) -->
        <div id="artist-detail-page" class="hidden">
            <button id="back-to-grid-btn" class="filter-btn px-4 py-2 mb-8">&lt; Voltar</button>
            <div class="flex flex-col md:flex-row gap-8">
                <div id="detail-card-container" class="w-full md:w-1/3"></div>
                <div class="w-full md:w-2/3">
                    <h2 id="detail-artist-name" class="text-4xl font-bold font-['Londrina_Solid']" style="color: var(--accent-yellow); text-shadow: 3px 3px 0px var(--accent-red), 6px 6px 0px var(--accent-blue);"></h2>
                    <p id="detail-artist-notes" class="text-black whitespace-pre-wrap mt-4"></p>
                </div>
            </div>
        </div>

    </div>

    <!-- MODAL DE HORÃRIOS (Oculto) -->
    <div id="schedule-modal" class="modal-overlay hidden">
        <div class="modal-content">
            <button id="modal-close-btn" class="modal-close-btn">X</button>
            <h2 id="modal-artist-name" class="text-3xl font-bold font-['Londrina_Solid'] text-white"></h2>
            <p id="modal-show-time" class="text-lg text-gray-400 mb-2"></p>
            <p id="modal-show-local" class="text-md text-yellow-300 mb-4"></p>
            
            <!-- BotÃ£o para marcar presenÃ§a -->
            <div class="mb-4">
                <button id="attend-btn" class="filter-btn px-6 py-2 w-full" onclick="toggleAttendance()">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="currentColor" class="inline mr-2">
                        <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/>
                    </svg>
                    <span id="attend-text">Marcar presenÃ§a</span>
                </button>
            </div>
            
            <h3 class="font-bold text-xl mb-2" style="color: var(--accent-yellow); text-shadow: 2px 2px 0px var(--accent-red);">ğŸŠ Confirmades: ğŸŠ</h3>
            <div id="modal-attendees-grid" class="grid grid-cols-3 sm:grid-cols-4 gap-4">
                <!-- Fotos dos amigos aqui -->
            </div>
        </div>
    </div>

    <!-- MODAL DE LOGIN (Oculto) -->
    <div id="login-modal" class="modal-overlay hidden">
        <div class="modal-content">
            <button onclick="hideLoginModal()" class="modal-close-btn">X</button>
            <h2 class="text-3xl font-bold font-['Londrina_Solid'] mb-6" style="color: var(--accent-yellow); text-shadow: 3px 3px 0px var(--accent-red);">ğŸ‰ Entrar no Bloco ğŸ‰</h2>
            
            <form onsubmit="event.preventDefault(); login();">
                <div class="mb-4">
                    <label for="login-name" class="block text-white font-bold mb-2">Seu nome:</label>
                    <input type="text" id="login-name" placeholder="Digite seu nome" required
                           class="w-full px-4 py-2 bg-gray-800 border-2 rounded-lg text-white focus:outline-none focus:border-red-500" style="border-color: var(--accent-yellow);">
                </div>
                
                <div class="mb-6">
                    <label for="login-avatar" class="block text-white font-bold mb-2">Foto de perfil (opcional):</label>
                    <input type="file" id="login-avatar" accept="image/*"
                           class="w-full px-4 py-2 bg-gray-800 border-2 rounded-lg text-white focus:outline-none focus:border-red-500" style="border-color: var(--accent-yellow);">
                </div>
                
                <button type="submit" class="filter-btn px-6 py-3 w-full text-lg">
                    Entrar e marcar presenÃ§a!
                </button>
            </form>
        </div>
    </div>

    <!-- Player de MÃºsica -->
    <audio id="background-music" loop>
        <source src="volteiRecife.mp3" type="audio/mpeg">
    </audio>
    <button id="music-toggle-btn" class="music-toggle" aria-label="Tocar mÃºsica">
        <!-- Ãcone de Play/Pause serÃ¡ inserido aqui pelo JavaScript -->
    </button>


    <script>
        // ############### ÃREA DE EDIÃ‡ÃƒO PRINCIPAL ###############
        // Lista de amigos removida - agora apenas usuÃ¡rios dinÃ¢micos
        const friends = [];
        
        // Schedules organizados por dia da semana - usando horÃ¡rios de concentraÃ§Ã£o como start
        const scheduleThursday = [
            // QUINTA (12/02) - Todos os blocos do CSV
            { id: 1, artist: "Escuta Levino", stage: 1, start: "19:00", end: "20:00", attendees: [], local: "PraÃ§a Maciel Pinheiro", cidade: "Recife" },
            { id: 2, artist: "Me Mostra Teu Mapa Astral", stage: 1, start: "18:00", end: "20:00", attendees: [], local: "PraÃ§a Maciel Pinheiro", cidade: "Recife" },
            { id: 3, artist: "Elefante de Olinda", stage: 2, start: "16:00", end: "17:00", attendees: [], local: "Sede do Homem", cidade: "Olinda" },
            { id: 4, artist: "AfojubÃ¡ Batuque", stage: 1, start: "16:00", end: "17:00", attendees: [], local: "Avenida MarquÃªs de Olinda", cidade: "Recife" },
            { id: 5, artist: "Shortinho Torano", stage: 1, start: "20:00", end: "21:00", attendees: [], local: "Rua do Apolo, 174", cidade: "Recife" },
        ];
        const scheduleFriday = [
            // SEXTA (13/02) - Todos os blocos do CSV
            { id: 101, artist: "ArrastÃ£o do Maestro Ã“seas", stage: 2, start: "15:00", end: "16:00", attendees: [], local: "Bar do RÃ³", cidade: "Olinda" },
            { id: 102, artist: "Abduzidos", stage: 2, start: "16:30", end: "17:30", attendees: [], local: "Casa Nala", cidade: "Olinda" },
            { id: 103, artist: "Segura o Tonho, Charlie Brow", stage: 1, start: "17:00", end: "19:30", attendees: [], local: "Rua da Moeda", cidade: "Recife" },
            { id: 104, artist: "Nem Sempre Lily Toca Flauta", stage: 1, start: "17:00", end: "19:00", attendees: [], local: "PÃ¡tio Santa Cruz", cidade: "Recife" },
            { id: 105, artist: "Mulher do Dia", stage: 2, start: "19:00", end: "19:00", attendees: [], local: "Vassourinhas de Olinda - Largo do Amparo", cidade: "Olinda" },
            { id: 106, artist: "Caraca Moleque", stage: 2, start: "17:00", end: "18:00", attendees: [], local: "Centro Luiz Freire", cidade: "Olinda" },
            { id: 107, artist: "Sem Nome", stage: 2, start: "18:00", end: "20:00", attendees: [], local: "Rua 27 de Janeiro, 197", cidade: "Olinda" },
            { id: 108, artist: "Traquinos em Folia", stage: 2, start: "18:30", end: "19:30", attendees: [], local: "Sede da Pitombeira", cidade: "Olinda" },
            { id: 109, artist: "Batuques de Pernambuco", stage: 1, start: "19:00", end: "20:00", attendees: [], local: "Rua da Moeda", cidade: "Recife" },
            { id: 110, artist: "Me Solta, Carai!", stage: 2, start: "20:00", end: "21:00", attendees: [], local: "Largo do Amparo", cidade: "Olinda" },
            { id: 111, artist: "Du Nada a Gente Sai", stage: 2, start: "19:00", end: "21:00", attendees: [], local: "Largo do Amparo", cidade: "Olinda" },
            { id: 112, artist: "La Ursa do Bonfim", stage: 2, start: "17:00", end: "22:00", attendees: [], local: "Clube Cariri", cidade: "Olinda" },
            { id: 113, artist: "Frevo e Folia", stage: 2, start: "18:30", end: "22:00", attendees: [], local: "Vassourinhas de Olinda - Largo do Amparo", cidade: "Olinda" },
            { id: 114, artist: "O Lord de Olinda", stage: 2, start: "18:00", end: "23:00", attendees: [], local: "Largo do Guadalupe", cidade: "Olinda" },
        ];
        const scheduleSaturday = [
            // SÃBADO (14/02) - Todos os blocos do CSV em ordem cronolÃ³gica
            { id: 201, artist: "Galo da Madrugada", stage: 1, start: "04:00", end: "09:00", attendees: [], local: "PraÃ§a SÃ©rgio LÃ´reto", cidade: "Recife" },
            { id: 202, artist: "Pinto do galo da Madrugada", stage: 1, start: "05:45", end: "06:45", attendees: [], local: "PraÃ§a do Marco Zero", cidade: "Recife" },
            { id: 203, artist: "Galinha d'Ãgua", stage: 1, start: "07:00", end: "08:00", attendees: [], local: "Rio Capibaribe", cidade: "Recife" },
            { id: 204, artist: "Sibito Baleado", stage: 2, start: "08:00", end: "09:00", attendees: [], local: "Rua Coronel Joaquim Cavalcanti, 201", cidade: "Olinda" },
            { id: 205, artist: "O Urso Cascudo do Amparo", stage: 2, start: "08:00", end: "09:00", attendees: [], local: "Largo do Guadalupe", cidade: "Olinda" },
            { id: 206, artist: "Eu Acho Ã© Pouco", stage: 2, start: "08:00", end: "09:00", attendees: [], local: "A confirmar", cidade: "Olinda" },
            { id: 207, artist: "Bloco Mangue Beat", stage: 2, start: "08:00", end: "09:00", attendees: [], local: "Mosteiro SÃ£o Bento", cidade: "Olinda" },
            { id: 208, artist: "Bloco do Frei", stage: 2, start: "08:00", end: "09:00", attendees: [], local: "Cruzeiro do Convento de SÃ£o Francisco", cidade: "Olinda" },
            { id: 209, artist: "Maracatu Kangoma", stage: 2, start: "08:00", end: "09:00", attendees: [], local: "Rua do Amparo, 236", cidade: "Olinda" },
            { id: 210, artist: "Tambores D'Saia", stage: 2, start: "08:00", end: "09:00", attendees: [], local: "PraÃ§a de SÃ£o Pedro", cidade: "Olinda" },
            { id: 211, artist: "Soul Delas", stage: 2, start: "08:00", end: "09:00", attendees: [], local: "Mosteiro SÃ£o Bento", cidade: "Olinda" },
            { id: 212, artist: "Patusquinho", stage: 1, start: "09:00", end: "09:59", attendees: [], local: "PÃ¡tio SÃ£o Pedro", cidade: "Recife" },
            { id: 213, artist: "De Tanta Ladeira Fiquei Rosa", stage: 2, start: "09:00", end: "10:00", attendees: [], local: "Mosteiro SÃ£o Bento", cidade: "Olinda" },
            { id: 214, artist: "Urso Congelado", stage: 2, start: "09:00", end: "10:00", attendees: [], local: "AÃ§aÃ­ do Carmo, 5", cidade: "Olinda" },
            { id: 215, artist: "FÃ¡brica de Samba", stage: 2, start: "09:00", end: "10:00", attendees: [], local: "Igreja de SÃ£o Pedro", cidade: "Olinda" },
            { id: 216, artist: "Fique na Sombra", stage: 2, start: "09:00", end: "10:00", attendees: [], local: "Rua da Boa Hora, 177", cidade: "Olinda" },
            { id: 217, artist: "Batucada AtÃ´mica", stage: 2, start: "09:00", end: "10:00", attendees: [], local: "Avenida 10 de Novembro", cidade: "Olinda" },
            { id: 218, artist: "Se me der eu como", stage: 2, start: "09:00", end: "11:30", attendees: [], local: "Rua do Bonfim 386", cidade: "Olinda" },
            { id: 219, artist: "Trinca de Ãs", stage: 2, start: "09:00", end: "09:00", attendees: [], local: "EspaÃ§o Cultural Osvaldo SÃ©rgio", cidade: "Olinda" },
            { id: 220, artist: "Papudinhos do Bonsucesso", stage: 2, start: "10:00", end: "17:00", attendees: [], local: "EspaÃ§o Cultural Osvaldo SÃ©rgio", cidade: "Olinda" },
            { id: 221, artist: "Pife Floyd", stage: 2, start: "10:00", end: "12:00", attendees: [], local: "Travessa de SÃ£o Francisco, 206", cidade: "Olinda" },
            { id: 222, artist: "Sombatuki", stage: 2, start: "10:00", end: "10:00", attendees: [], local: "Largo do Amparo", cidade: "Olinda" },
            { id: 223, artist: "Ceroula de Olinda", stage: 2, start: "12:00", end: "16:00", attendees: [], local: "ColÃ©gio Sao Bento", cidade: "Olinda" },
            { id: 224, artist: "Moidicuento", stage: 2, start: "13:00", end: "14:00", attendees: [], local: "PraÃ§a Cel JoÃ£o Lapa", cidade: "Olinda" },
            { id: 225, artist: "Ta Bom a Gente Freva", stage: 2, start: "13:30", end: "14:30", attendees: [], local: "Mosteiro SÃ£o Bento", cidade: "Olinda" },
            { id: 226, artist: "Bumba Meu Bowie", stage: 2, start: "14:00", end: "14:00", attendees: [], local: "PraÃ§a do JacarÃ©", cidade: "Olinda" },
            { id: 227, artist: "Maracadonna", stage: 2, start: "14:00", end: "14:00", attendees: [], local: "PraÃ§a do JacarÃ©", cidade: "Olinda" },
            { id: 228, artist: "Chapadinhos na Praia", stage: 2, start: "14:00", end: "14:50", attendees: [], local: "Alto da SÃ©", cidade: "Olinda" },
            { id: 229, artist: "AfojubÃ¡ Batuque", stage: 2, start: "14:00", end: "15:00", attendees: [], local: "Mosteiro SÃ£o Bento", cidade: "Olinda" },
            { id: 230, artist: "Cordas e Retalhos", stage: 1, start: "15:00", end: "16:00", attendees: [], local: "Rua da Guia, 86", cidade: "Recife" },
            { id: 231, artist: "SobrecÃº", stage: 2, start: "15:00", end: "16:20", attendees: [], local: "Beco do Bajado", cidade: "Olinda" },
            { id: 232, artist: "Hoje a Mangueira Entra", stage: 2, start: "16:00", end: "16:00", attendees: [], local: "Rua Coronel Joaquim Cavalcanti, 487", cidade: "Olinda" },
            { id: 233, artist: "Menino da Tarde", stage: 2, start: "16:00", end: "17:00", attendees: [], local: "Largo do Guadalupe", cidade: "Olinda" },
            { id: 234, artist: "Burra do RosÃ¡rio", stage: 2, start: "18:00", end: "18:00", attendees: [], local: "Guadalupe - Sede da Burra", cidade: "Olinda" },
            { id: 235, artist: "AfoxÃ© Alafin OyÃ³", stage: 2, start: "18:00", end: "19:00", attendees: [], local: "Largo do Guadalupe", cidade: "Olinda" },
            { id: 236, artist: "John Travolta", stage: 2, start: "18:00", end: "19:00", attendees: [], local: "Vassourinhas de Olinda - Largo do Amparo", cidade: "Olinda" },
            { id: 237, artist: "Homem da Meia Noite", stage: 2, start: "23:00", end: "00:00", attendees: [], local: "Estrada do Bom Sucesso - Sede do Homem", cidade: "Olinda" },
        ];
        const scheduleSunday = [
            // DOMINGO (15/02) - Todos os blocos do CSV em ordem cronolÃ³gica
            { id: 301, artist: "Cariri", stage: 2, start: "03:00", end: "04:00", attendees: [], local: "Clube Cariri", cidade: "Olinda" },
            { id: 302, artist: "Mucha Lucha", stage: 2, start: "08:00", end: "08:00", attendees: [], local: "Alto da SÃ©", cidade: "Olinda" },
            { id: 303, artist: "A Rede", stage: 2, start: "08:00", end: "09:00", attendees: [], local: "Largo do Guadalupe", cidade: "Olinda" },
            { id: 304, artist: "BatadonÃ­", stage: 2, start: "08:00", end: "09:00", attendees: [], local: "PraÃ§a do Carmo", cidade: "Olinda" },
            { id: 305, artist: "Birita de Olinda", stage: 2, start: "08:00", end: "09:00", attendees: [], local: "Rua do Amparo 110", cidade: "Olinda" },
            { id: 306, artist: "Batuques de Pernambuco", stage: 2, start: "08:00", end: "09:00", attendees: [], local: "PraÃ§a do Carmo", cidade: "Olinda" },
            { id: 307, artist: "Filhas de Betha", stage: 2, start: "08:00", end: "10:00", attendees: [], local: "Largo do Amparo", cidade: "Olinda" },
            { id: 308, artist: "D'Breck", stage: 2, start: "09:00", end: "09:00", attendees: [], local: "Largo do Bonfim", cidade: "Olinda" },
            { id: 309, artist: "Patusco", stage: 2, start: "09:00", end: "09:59", attendees: [], local: "Rua do Amparo, 292", cidade: "Olinda" },
            { id: 310, artist: "Sambadeiras", stage: 2, start: "09:00", end: "10:00", attendees: [], local: "Ladeira da Misericordia", cidade: "Olinda" },
            { id: 311, artist: "Enquanto Isso Na Sala da JustiÃ§a", stage: 2, start: "09:00", end: "10:00", attendees: [], local: "Alto da SÃ©", cidade: "Olinda" },
            { id: 312, artist: "Congobloco", stage: 2, start: "09:00", end: "10:00", attendees: [], local: "Sede do Macaratu NaÃ§Ã£o Pernambuco", cidade: "Olinda" },
            { id: 313, artist: "TÃ¡ Calor Nessa Roupa?", stage: 2, start: "09:00", end: "10:00", attendees: [], local: "Casbah", cidade: "Olinda" },
            { id: 314, artist: "Mulher do Dia", stage: 2, start: "09:00", end: "10:00", attendees: [], local: "Casa PE no Carnaval", cidade: "Olinda" },
            { id: 315, artist: "Bloco Tira Lama", stage: 2, start: "09:00", end: "10:00", attendees: [], local: "Mosteiro SÃ£o Bento", cidade: "Olinda" },
            { id: 316, artist: "Rebylleurias", stage: 2, start: "09:30", end: "10:30", attendees: [], local: "Rua do Bonfim, 449", cidade: "Olinda" },
            { id: 317, artist: "Me Adota", stage: 2, start: "10:00", end: "14:00", attendees: [], local: "PraÃ§a do Carmo", cidade: "Olinda" },
            { id: 318, artist: "Sombatuki", stage: 2, start: "10:00", end: "10:00", attendees: [], local: "Rua do Bonfim", cidade: "Olinda" },
            { id: 319, artist: "Dez de Xarque e Uma Latinha", stage: 2, start: "11:00", end: "12:00", attendees: [], local: "Largo do Amparo", cidade: "Olinda" },
            { id: 320, artist: "Umuarama", stage: 2, start: "11:00", end: "14:00", attendees: [], local: "Rua EpitÃ¡cio Pessoa Sobrinho, 91", cidade: "Olinda" },
            { id: 321, artist: "Bloco do Cimento", stage: 2, start: "11:00", end: "15:30", attendees: [], local: "Vassourinhas de Olinda - Largo do Amparo", cidade: "Olinda" },
            { id: 322, artist: "Fogo na Bacurinha", stage: 2, start: "12:00", end: "15:00", attendees: [], local: "Mercado da Ribeira", cidade: "Olinda" },
            { id: 323, artist: "Marim dos CaetÃ©s", stage: 2, start: "13:00", end: "14:00", attendees: [], local: "Largo do Guadalupe", cidade: "Olinda" },
            { id: 324, artist: "A Cama de Olinda", stage: 2, start: "14:00", end: "15:00", attendees: [], local: "Rua Coronel Joaquim Cavalcante (AteliÃª de Billy)", cidade: "Olinda" },
            { id: 325, artist: "Grheia", stage: 2, start: "15:30", end: "15:30", attendees: [], local: "Alto da SÃ©", cidade: "Olinda" },
            { id: 326, artist: "Vem Pra Sombra", stage: 2, start: "15:00", end: "16:00", attendees: [], local: "Estrada do Bonsucesso, 510", cidade: "Olinda" },
            { id: 327, artist: "Unidos Pela Ansiedade", stage: 2, start: "15:00", end: "16:00", attendees: [], local: "Rua do Bonfim (esquina com a PraÃ§a do Carmo)", cidade: "Olinda" },
            { id: 328, artist: "Caranguejo no CaÃ§uÃ¡", stage: 1, start: "15:00", end: "16:00", attendees: [], local: "Rua da Moeda", cidade: "Recife" },
            { id: 329, artist: "O Dono do Mundo", stage: 2, start: "16:30", end: "17:30", attendees: [], local: "Largo do Guadalupe", cidade: "Olinda" },
            { id: 330, artist: "Elefante de Olinda", stage: 2, start: "17:00", end: "19:00", attendees: [], local: "Largo do Bonsucesso - Sede do Homem", cidade: "Olinda" },
        ];
        const scheduleMonday = [
            // SEGUNDA (16/02) - Todos os blocos do CSV em ordem cronolÃ³gica
            { id: 401, artist: "Apoteose dos Bonecos Gigantes", stage: 2, start: "08:00", end: "09:00", attendees: [], local: "Alto da SÃ©", cidade: "Olinda" },
            { id: 402, artist: "Minha Cobra", stage: 2, start: "08:00", end: "09:00", attendees: [], local: "Largo do Bonsucesso", cidade: "Olinda" },
            { id: 403, artist: "Soul Delas", stage: 2, start: "08:00", end: "09:00", attendees: [], local: "Mosteiro SÃ£o Bento", cidade: "Olinda" },
            { id: 404, artist: "Tambores D'Saia", stage: 2, start: "08:00", end: "09:00", attendees: [], local: "PraÃ§a de SÃ£o Pedro", cidade: "Olinda" },
            { id: 405, artist: "Birita de Olinda", stage: 2, start: "08:30", end: "09:30", attendees: [], local: "Rua do Amparo, 110", cidade: "Olinda" },
            { id: 406, artist: "FÃ¡brica de Samba", stage: 2, start: "09:00", end: "10:00", attendees: [], local: "Igreja de SÃ£o Pedro", cidade: "Olinda" },
            { id: 407, artist: "MÃ©xico Peru", stage: 2, start: "09:00", end: "10:30", attendees: [], local: "Ladeira da MisericÃ³rdia", cidade: "Olinda" },
            { id: 408, artist: "Comigo Ã© Assim", stage: 2, start: "10:00", end: "10:30", attendees: [], local: "Alto da SÃ©", cidade: "Olinda" },
            { id: 409, artist: "MinhocÃ£o de Olinda", stage: 2, start: "10:00", end: "11:30", attendees: [], local: "AtrÃ¡s da Igreja de SÃ£o Pedro", cidade: "Olinda" },
            { id: 410, artist: "Pitombeira dos Quatro Cantos", stage: 2, start: "10:00", end: "10:00", attendees: [], local: "Sede da Pitombeira", cidade: "Olinda" },
            { id: 411, artist: "Metido a Rico PorÃ©m Liso", stage: 2, start: "11:00", end: "17:00", attendees: [], local: "EspaÃ§o Cultural Osvaldo SÃ©rgio", cidade: "Olinda" },
            { id: 412, artist: "Ta'Qui Pr'OcÃªs", stage: 2, start: "11:00", end: "12:00", attendees: [], local: "Rua Nelson Guedes da Silva, 142 (Beco do Lixo)", cidade: "Olinda" },
            { id: 413, artist: "Se Eu Flopar Me Beija", stage: 2, start: "11:30", end: "12:30", attendees: [], local: "PraÃ§a Cel JoÃ£o Lapa", cidade: "Olinda" },
            { id: 414, artist: "Mulher na Vara", stage: 2, start: "11:30", end: "13:30", attendees: [], local: "Casa de Dona DÃ¡", cidade: "Olinda" },
            { id: 415, artist: "Bloco do Nada", stage: 1, start: "13:00", end: "17:00", attendees: [], local: "Rua RosÃ¡rio da Boa Vista", cidade: "Recife" },
            { id: 416, artist: "PrÃ©-Sal", stage: 2, start: "13:00", end: "14:00", attendees: [], local: "Rua Joaquim Cavalcanti, 511", cidade: "Olinda" },
            { id: 417, artist: "Amantes de GlÃ³ria", stage: 1, start: "13:00", end: "14:00", attendees: [], local: "Rua da Guia", cidade: "Recife" },
            { id: 418, artist: "Garoto de Vassoura", stage: 2, start: "14:30", end: "17:00", attendees: [], local: "Rua Antonio Luciano de Oliveira, 239", cidade: "Olinda" },
            { id: 419, artist: "Segunda tem palhaÃ§o", stage: 1, start: "15:00", end: "16:00", attendees: [], local: "Rua da Moeda", cidade: "Recife" },
            { id: 420, artist: "Bloco da Saudade", stage: 1, start: "15:00", end: "16:00", attendees: [], local: "PraÃ§a Maciel Pinheiro", cidade: "Recife" },
            { id: 421, artist: "Bloco da Ema", stage: 2, start: "15:00", end: "16:00", attendees: [], local: "PraÃ§a Cel JoÃ£o Lapa", cidade: "Olinda" },
            { id: 422, artist: "FÃ­gado de AÃ§o", stage: 2, start: "15:00", end: "16:00", attendees: [], local: "Rua do Bonfim, 109", cidade: "Olinda" },
            { id: 423, artist: "Batucada AtÃ´mica", stage: 2, start: "15:00", end: "16:00", attendees: [], local: "PraÃ§a do Carmo - Focca", cidade: "Olinda" },
            { id: 424, artist: "Maracatu NaÃ§Ã£o Pernambuco", stage: 2, start: "15:00", end: "16:00", attendees: [], local: "CasarÃ£o NaÃ§Ã£o Pernambuco", cidade: "Olinda" },
            { id: 425, artist: "Grheia", stage: 2, start: "15:30", end: "15:30", attendees: [], local: "Alto da SÃ©", cidade: "Olinda" },
            { id: 426, artist: "O Rodo", stage: 2, start: "18:00", end: "19:30", attendees: [], local: "Casa de Dona DÃ¡", cidade: "Olinda" },
            { id: 427, artist: "Noite dos tambores silenciosos", stage: 1, start: "19:00", end: "20:00", attendees: [], local: "PÃ¡tio do TerÃ§o", cidade: "Recife" },
            { id: 428, artist: "Boi da Macuca", stage: 2, start: "19:00", end: "20:00", attendees: [], local: "Vassourinhas de Olinda - Largo do Amparo", cidade: "Olinda" },
        ];
        const scheduleTuesday = [
            // TERÃ‡A (17/02) - Todos os blocos do CSV em ordem cronolÃ³gica
            { id: 501, artist: "A Corda", stage: 2, start: "07:00", end: "07:00", attendees: [], local: "Ladeira da Misericordia", cidade: "Olinda" },
            { id: 502, artist: "A Porca", stage: 2, start: "07:00", end: "08:00", attendees: [], local: "Rua da Palha com a Dr Moreira Alves", cidade: "Olinda" },
            { id: 503, artist: "Ar de Olinda", stage: 2, start: "08:00", end: "09:00", attendees: [], local: "Prefeitura de Olinda", cidade: "Olinda" },
            { id: 504, artist: "Maracatu Kangoma", stage: 2, start: "08:00", end: "09:00", attendees: [], local: "Rua do Amparo, 236", cidade: "Olinda" },
            { id: 505, artist: "BatadonÃ­", stage: 2, start: "08:00", end: "09:00", attendees: [], local: "PraÃ§a do Carmo", cidade: "Olinda" },
            { id: 506, artist: "Batuques de Pernambuco", stage: 2, start: "08:00", end: "09:00", attendees: [], local: "PraÃ§a do Carmo", cidade: "Olinda" },
            { id: 507, artist: "D'Breck", stage: 2, start: "09:00", end: "09:00", attendees: [], local: "Largo do Bonfim", cidade: "Olinda" },
            { id: 508, artist: "Patusco", stage: 2, start: "09:00", end: "09:59", attendees: [], local: "Rua do Amparo, 292", cidade: "Olinda" },
            { id: 509, artist: "Sambadeiras", stage: 2, start: "09:00", end: "10:00", attendees: [], local: "Ladeira da Misericordia", cidade: "Olinda" },
            { id: 510, artist: "Deusas do Ã‰bano", stage: 2, start: "09:00", end: "10:00", attendees: [], local: "PraÃ§a do Carmo", cidade: "Olinda" },
            { id: 511, artist: "Rebylleurias", stage: 2, start: "09:30", end: "10:30", attendees: [], local: "Rua do Bonfim, 449", cidade: "Olinda" },
            { id: 512, artist: "Caranguejo PapamÃ©", stage: 2, start: "10:00", end: "15:00", attendees: [], local: "Rua JerÃ´nimo de Albuquerque, 112", cidade: "Olinda" },
            { id: 513, artist: "Pitombeira dos Quatro Cantos", stage: 2, start: "10:00", end: "10:00", attendees: [], local: "Largo do Amparo", cidade: "Olinda" },
            { id: 514, artist: "Encontro dos Bonecos Gigantes", stage: 2, start: "10:00", end: "11:00", attendees: [], local: "Largo do Guadalupe", cidade: "Olinda" },
            { id: 515, artist: "Quem Cola Entra", stage: 2, start: "11:00", end: "13:00", attendees: [], local: "Rua Henrique Dias, 130", cidade: "Olinda" },
            { id: 516, artist: "Os Abutres", stage: 2, start: "11:00", end: "12:00", attendees: [], local: "Rua 15 de Novembro", cidade: "Olinda" },
            { id: 517, artist: "Zebra das Olindas", stage: 2, start: "11:00", end: "12:00", attendees: [], local: "Rua Maria Adalgisa Ferreira de Castro", cidade: "Olinda" },
            { id: 518, artist: "Segurucu", stage: 2, start: "12:00", end: "14:30", attendees: [], local: "Bar Esquina do Carmo", cidade: "Olinda" },
            { id: 519, artist: "Bloco da Saudade", stage: 1, start: "12:00", end: "16:00", attendees: [], local: "PraÃ§a Maciel Pinheiro", cidade: "Recife" },
            { id: 520, artist: "Ceroula de Olinda", stage: 2, start: "12:00", end: "16:00", attendees: [], local: "ColÃ©gio Sao Bento", cidade: "Olinda" },
            { id: 521, artist: "Rainha", stage: 2, start: "15:00", end: "16:00", attendees: [], local: "Rua Coronel Joaquim Cavalcante , 298", cidade: "Olinda" },
            { id: 522, artist: "Quero ver quem vai", stage: 1, start: "15:00", end: "16:00", attendees: [], local: "PraÃ§a do Arsenal", cidade: "Recife" },
            { id: 523, artist: "Maracatu NaÃ§Ã£o Pernambuco", stage: 1, start: "16:00", end: "17:00", attendees: [], local: "PraÃ§a do Arsenal", cidade: "Recife" },
            { id: 524, artist: "Eu Acho Ã© Pouco", stage: 2, start: "16:00", end: "17:00", attendees: [], local: "Local nÃ£o divulgado", cidade: "Olinda" },
            { id: 525, artist: "AfojubÃ¡ Batuque", stage: 1, start: "16:00", end: "17:00", attendees: [], local: "Avenida MarquÃªs de Olinda", cidade: "Recife" },
            { id: 526, artist: "Lenhadores Olindense", stage: 2, start: "17:00", end: "19:30", attendees: [], local: "Largo do Guadalupe", cidade: "Olinda" },
            { id: 527, artist: "Congobloco", stage: 1, start: "19:00", end: "20:00", attendees: [], local: "Rua da Guia", cidade: "Recife" },
        ];
        const scheduleWednesday = [
            // QUARTA (15/02) - Todos os blocos do CSV em ordem cronolÃ³gica
            { id: 601, artist: "Bacalhau do Batata", stage: 2, start: "08:00", end: "08:00", attendees: [], local: "Alto da SÃ©", cidade: "Olinda" },
            { id: 602, artist: "Bloco do BarÃ£o", stage: 2, start: "10:00", end: "11:00", attendees: [], local: "Rua da Boa Hora", cidade: "Olinda" },
            { id: 603, artist: "Coveirinhos na Folia", stage: 2, start: "13:00", end: "14:00", attendees: [], local: "CemitÃ©rio de Guadalupe", cidade: "Olinda" },
            { id: 604, artist: "Boi da Macuca", stage: 2, start: "17:00", end: "18:00", attendees: [], local: "Largo do Guadalupe", cidade: "Olinda" },
            { id: 605, artist: "Bloco do Case", stage: 2, start: "17:00", end: "18:00", attendees: [], local: "AtrÃ¡s da Igreja de SÃ£o Pedro", cidade: "Olinda" },
            { id: 606, artist: "Encontro de Bois", stage: 2, start: "18:00", end: "19:00", attendees: [], local: "Rua da Boa Hora", cidade: "Olinda" },
            { id: 607, artist: "Segura a Coisa", stage: 2, start: "23:00", end: "23:59", attendees: [], local: "PraÃ§a do Fortim", cidade: "Olinda" },
        ];
        // Lista de blocos de carnaval de Recife e Olinda 2026
        const blocosData = [
            { name: "Escuta Levino", imageUrl: "sombrinha.jpg", details: "ğŸ“ Local: PraÃ§a Maciel Pinheiro\nğŸ• ConcentraÃ§Ã£o: 19:00 | SaÃ­da: 20:00\nğŸ™ï¸ Cidade: Recife\n\nBloco tradicional do carnaval recifense com muito frevo e animaÃ§Ã£o!" },
            { name: "Me Mostro Teu Mapa Astral", imageUrl: "sombrinha.jpg", details: "ğŸ“ Local: PraÃ§a Maciel Pinheiro\nğŸ• ConcentraÃ§Ã£o: 18:00 | SaÃ­da: 20:00\nğŸ™ï¸ Cidade: Recife\n\nBloco temÃ¡tico com astrologia e muita diversÃ£o!" },
            { name: "Elefante de Olinda", imageUrl: "bonecoOlinda.jpg", details: "ğŸ“ Local: Largo do Bonsucesso - Sede do Homem\nğŸ• ConcentraÃ§Ã£o: 16:00 | SaÃ­da: 17:00\nğŸ™ï¸ Cidade: Olinda\n\nUm dos blocos mais tradicionais de Olinda!" },
            { name: "AfojubÃ¡ Batuque", imageUrl: "sombrinha.jpg", details: "ğŸ“ Local: Avenida MarquÃªs de Olinda\nğŸ• ConcentraÃ§Ã£o: 16:00 | SaÃ­da: 17:00\nğŸ™ï¸ Cidade: Recife\n\nBloco com muito batuque e energia!" },
            { name: "Shortinho Torano", imageUrl: "sombrinha.jpg", details: "ğŸ“ Local: Rua do Apolo, 174\nğŸ• ConcentraÃ§Ã£o: 20:00 | SaÃ­da: 21:00\nğŸ™ï¸ Cidade: Recife\n\nBloco animado no centro histÃ³rico do Recife!" },
            { name: "ArrastÃ£o do Maestro Ã“seas", imageUrl: "sombrinha.jpg", details: "ğŸ“ Local: Bar do RÃ³\nğŸ• ConcentraÃ§Ã£o: 15:00 | SaÃ­da: 16:00\nğŸ™ï¸ Cidade: Olinda\n\nArrastÃ£o tradicional com o Maestro Ã“seas!" },
            { name: "Abduzidos", imageUrl: "sombrinha.jpg", details: "ğŸ“ Local: Casa Nola\nğŸ• ConcentraÃ§Ã£o: 16:30 | SaÃ­da: 17:30\nğŸ™ï¸ Cidade: Olinda\n\nBloco temÃ¡tico com muita animaÃ§Ã£o!" },
            { name: "Segura o Tonho, Charlie Brow", imageUrl: "sombrinha.jpg", details: "ğŸ“ Local: Rua da Moeda\nğŸ• ConcentraÃ§Ã£o: 17:00 | SaÃ­da: 19:30\nğŸ™ï¸ Cidade: Recife\n\nBloco animado no centro histÃ³rico!" },
            { name: "Nem Sempre Lily Toca Flauta", imageUrl: "sombrinha.jpg", details: "ğŸ“ Local: PÃ¡tio Santa Cruz\nğŸ• ConcentraÃ§Ã£o: 17:00 | SaÃ­da: 19:00\nğŸ™ï¸ Cidade: Recife\n\nBloco com muito humor e animaÃ§Ã£o!" },
            { name: "Mulher do Dia", imageUrl: "sombrinha.jpg", details: "ğŸ“ Local: Bar do RÃ³\nğŸ• ConcentraÃ§Ã£o: 17:00 | SaÃ­da: 18:00\nğŸ™ï¸ Cidade: Olinda\n\nBloco que celebra as mulheres!" },
            { name: "Caraca Moleque", imageUrl: "sombrinha.jpg", details: "ğŸ“ Local: Centro Luiz Freire\nğŸ• ConcentraÃ§Ã£o: 17:00 | SaÃ­da: 18:00\nğŸ™ï¸ Cidade: Olinda\n\nBloco tradicional de Olinda!" },
            { name: "Traquinos em Folia", imageUrl: "sombrinha.jpg", details: "ğŸ“ Local: Sede da Pitombeira\nğŸ• ConcentraÃ§Ã£o: 18:30 | SaÃ­da: 19:30\nğŸ™ï¸ Cidade: Olinda\n\nBloco infantil com muita animaÃ§Ã£o!" },
            { name: "Batuques de Pernambuco", imageUrl: "sombrinha.jpg", details: "ğŸ“ Local: Rua da Moeda\nğŸ• ConcentraÃ§Ã£o: 19:00 | SaÃ­da: 20:00\nğŸ™ï¸ Cidade: Recife\n\nBloco com muito batuque e percussÃ£o!" },
            { name: "Me Solta, Carail", imageUrl: "sombrinha.jpg", details: "ğŸ“ Local: Largo do Amparo\nğŸ• ConcentraÃ§Ã£o: 20:00 | SaÃ­da: 21:00\nğŸ™ï¸ Cidade: Olinda\n\nBloco animado no Largo do Amparo!" },
            { name: "Du Nada a Gente Sai", imageUrl: "sombrinha.jpg", details: "ğŸ“ Local: Largo do Amparo\nğŸ• ConcentraÃ§Ã£o: 19:00 | SaÃ­da: 21:00\nğŸ™ï¸ Cidade: Olinda\n\nBloco tradicional de Olinda!" },
            { name: "La Ursa do Bonfim", imageUrl: "sombrinha.jpg", details: "ğŸ“ Local: Clube Cariri\nğŸ• ConcentraÃ§Ã£o: 17:00 | SaÃ­da: 22:00\nğŸ™ï¸ Cidade: Olinda\n\nBloco com longa duraÃ§Ã£o e muita animaÃ§Ã£o!" },
            { name: "Frevo e Folia", imageUrl: "sombrinha.jpg", details: "ğŸ“ Local: Vassourinhas de Olinda - Largo do Amparo\nğŸ• ConcentraÃ§Ã£o: 18:30 | SaÃ­da: 22:00\nğŸ™ï¸ Cidade: Olinda\n\nMuito frevo e folia em Olinda!" },
            { name: "O Lord de Olinda", imageUrl: "bonecoOlinda.jpg", details: "ğŸ“ Local: Largo do Guadalupe\nğŸ• ConcentraÃ§Ã£o: 18:00 | SaÃ­da: 23:00\nğŸ™ï¸ Cidade: Olinda\n\nBloco tradicional com longa duraÃ§Ã£o!" },
            { name: "Galo da Madrugada", imageUrl: "sombrinha.jpg", details: "ğŸ“ Local: PraÃ§a SÃ©rgio LÃ´reto\nğŸ• ConcentraÃ§Ã£o: 04:00 | SaÃ­da: 09:00\nğŸ™ï¸ Cidade: Recife\n\nO maior bloco de carnaval do mundo! TradiÃ§Ã£o e animaÃ§Ã£o desde a madrugada!" },
            { name: "Pinto do galo da Madrugada", imageUrl: "sombrinha.jpg", details: "ğŸ“ Local: PraÃ§a do Marco Zero\nğŸ• ConcentraÃ§Ã£o: 05:45 | SaÃ­da: 06:45\nğŸ™ï¸ Cidade: Recife\n\nBloco que antecede o Galo da Madrugada!" },
            { name: "Galinha d'Ãgua", imageUrl: "sombrinha.jpg", details: "ğŸ“ Local: Rio Capibaribe\nğŸ• ConcentraÃ§Ã£o: 07:00 | SaÃ­da: 08:00\nğŸ™ï¸ Cidade: Recife\n\nBloco aquÃ¡tico no Rio Capibaribe!" },
            { name: "Sibito Baleado", imageUrl: "sombrinha.jpg", details: "ğŸ“ Local: Rua Coronel Joaquim Cavalcanti, 201\nğŸ• ConcentraÃ§Ã£o: 08:00 | SaÃ­da: 09:00\nğŸ™ï¸ Cidade: Olinda\n\nBloco tradicional de Olinda!" },
            { name: "O Urso Cascudo do Amparo", imageUrl: "bonecoOlinda.jpg", details: "ğŸ“ Local: Largo do Guadalupe\nğŸ• ConcentraÃ§Ã£o: 08:00 | SaÃ­da: 09:00\nğŸ™ï¸ Cidade: Olinda\n\nBloco com boneco gigante!" },
            { name: "Eu Acho Ã© Pouco", imageUrl: "sombrinha.jpg", details: "ğŸ“ Local: A confirmar\nğŸ• ConcentraÃ§Ã£o: 08:00 | SaÃ­da: 09:00\nğŸ™ï¸ Cidade: Olinda\n\nBloco animado de Olinda!" },
            { name: "Bloco Mangue Beat", imageUrl: "sombrinha.jpg", details: "ğŸ“ Local: Mosteiro SÃ£o Bento\nğŸ• ConcentraÃ§Ã£o: 08:00 | SaÃ­da: 09:00\nğŸ™ï¸ Cidade: Olinda\n\nBloco com referÃªncia ao movimento Mangue Beat!" },
            { name: "Bloco do Frei", imageUrl: "sombrinha.jpg", details: "ğŸ“ Local: Cruzeiro do Convento de SÃ£o Francisco\nğŸ• ConcentraÃ§Ã£o: 08:00 | SaÃ­da: 09:00\nğŸ™ï¸ Cidade: Olinda\n\nBloco tradicional no Convento de SÃ£o Francisco!" },
            { name: "Maracatu Kangoma", imageUrl: "sombrinha.jpg", details: "ğŸ“ Local: Rua do Amparo, 236\nğŸ• ConcentraÃ§Ã£o: 08:00 | SaÃ­da: 09:00\nğŸ™ï¸ Cidade: Olinda\n\nMaracatu tradicional de Olinda!" },
            { name: "Patusquinho", imageUrl: "sombrinha.jpg", details: "ğŸ“ Local: PÃ¡tio SÃ£o Pedro\nğŸ• ConcentraÃ§Ã£o: 09:00 | SaÃ­da: 09:59\nğŸ™ï¸ Cidade: Recife\n\nBloco animado no PÃ¡tio SÃ£o Pedro!" },
            { name: "Tambores D'Saia", imageUrl: "sombrinha.jpg", details: "ğŸ“ Local: PraÃ§a de SÃ£o Pedro\nğŸ• ConcentraÃ§Ã£o: 08:00 | SaÃ­da: 09:00\nğŸ™ï¸ Cidade: Olinda\n\nBloco com tambores e muita energia!" },
            { name: "Soul Delas", imageUrl: "sombrinha.jpg", details: "ğŸ“ Local: Mosteiro SÃ£o Bento\nğŸ• ConcentraÃ§Ã£o: 08:00 | SaÃ­da: 09:00\nğŸ™ï¸ Cidade: Olinda\n\nBloco com soul music e animaÃ§Ã£o!" },
            { name: "Urso Congelado", imageUrl: "bonecoOlinda.jpg", details: "ğŸ“ Local: AÃ§aÃ­ do Carmo, 5\nğŸ• ConcentraÃ§Ã£o: 09:00 | SaÃ­da: 10:00\nğŸ™ï¸ Cidade: Olinda\n\nBloco com boneco de urso!" },
            { name: "Pife Floyd", imageUrl: "sombrinha.jpg", details: "ğŸ“ Local: Travessa de SÃ£o Francisco, 206\nğŸ• ConcentraÃ§Ã£o: 10:00 | SaÃ­da: 12:00\nğŸ™ï¸ Cidade: Olinda\n\nBloco com referÃªncia ao Pink Floyd!" },
            { name: "Sombatuki", imageUrl: "sombrinha.jpg", details: "ğŸ“ Local: Largo do Amparo\nğŸ• ConcentraÃ§Ã£o: 10:00 | SaÃ­da: 10:00\nğŸ™ï¸ Cidade: Olinda\n\nBloco animado no Largo do Amparo!" },
            { name: "Fique na Sombra", imageUrl: "sombrinha.jpg", details: "ğŸ“ Local: Rua da Boa Hora, 177\nğŸ• ConcentraÃ§Ã£o: 09:00 | SaÃ­da: 10:00\nğŸ™ï¸ Cidade: Olinda\n\nBloco com sombrinhas de frevo!" },
            { name: "Batucada AtÃ´mica", imageUrl: "sombrinha.jpg", details: "ğŸ“ Local: Avenida 10 de Novembro\nğŸ• ConcentraÃ§Ã£o: 09:00 | SaÃ­da: 10:00\nğŸ™ï¸ Cidade: Olinda\n\nBloco com muita batucada e energia!" },
        ];
        
        // --- LÃ“GICA DA PÃGINA ---
        const mainContent = document.getElementById('main-content');
        const artistDetailPage = document.getElementById('artist-detail-page');
        const artistsPage = document.getElementById('artists-page');
        const schedulePage = document.getElementById('schedule-page');
        const viewArtistsBtn = document.getElementById('view-artists-btn');
        const viewScheduleBtn = document.getElementById('view-schedule-btn');
        const dayThursdayBtn = document.getElementById('day-thursday-btn');
        const dayFridayBtn = document.getElementById('day-friday-btn');
        const daySaturdayBtn = document.getElementById('day-saturday-btn');
        const daySundayBtn = document.getElementById('day-sunday-btn');
        const dayMondayBtn = document.getElementById('day-monday-btn');
        const dayTuesdayBtn = document.getElementById('day-tuesday-btn');
        const dayWednesdayBtn = document.getElementById('day-wednesday-btn');
        
        const dayButtons = [dayThursdayBtn, dayFridayBtn, daySaturdayBtn, daySundayBtn, dayMondayBtn, dayTuesdayBtn, dayWednesdayBtn];
        const artistGrid = document.getElementById('artist-grid');
        const scheduleGridContainer = document.getElementById('schedule-grid-container');
        const backToGridBtn = document.getElementById('back-to-grid-btn');
        const scheduleModal = document.getElementById('schedule-modal');
        const modalCloseBtn = document.getElementById('modal-close-btn');

        function displayArtists(artists) {
            artistGrid.innerHTML = artists.map(artist => `
                <div class="artist-card-link cursor-pointer" data-artist-name="${artist.name}">
                    <div class="artist-card rounded-lg overflow-hidden group">
                        <img src="${artist.imageUrl}" alt="Foto de ${artist.name}" class="w-full h-40 object-cover" 
                             loading="lazy" 
                             onerror="this.onerror=null; this.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzAwIiBoZWlnaHQ9IjIwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjZmY3ZWI5Ii8+PHRleHQgeD0iNTAlIiB5PSI1MCUiIGZvbnQtc2l6ZT0iMjAiIGZpbGw9IndoaXRlIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBkeT0iLjNlbSI+Q2FybmF2YWw8L3RleHQ+PC9zdmc+';">
                        <div class="p-3"><h3 class="font-bold text-lg truncate text-gray-100">${artist.name}</h3></div>
                    </div>
                </div>`).join('');
        }

        function createArtistDetailCard(artist) {
            return `
                <div class="artist-card rounded-lg overflow-hidden group w-full" style="transform: none;">
                    <img src="${artist.imageUrl}" alt="Foto de ${artist.name}" class="w-full h-auto object-cover" 
                         loading="lazy"
                         onerror="this.onerror=null; this.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzAwIiBoZWlnaHQ9IjIwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjZmY3ZWI5Ii8+PHRleHQgeD0iNTAlIiB5PSI1MCUiIGZvbnQtc2l6ZT0iMjAiIGZpbGw9IndoaXRlIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBkeT0iLjNlbSI+Q2FybmF2YWw8L3RleHQ+PC9zdmc+';">
                    <div class="p-3"><h3 class="font-bold text-lg text-gray-100">${artist.name}</h3></div>
                </div>`;
        }
        
        function timeToGridRow(timeStr) {
            let [h, m] = timeStr.split(':').map(Number);
            if (h < 4) h += 24;
            // Cada linha representa 15 minutos, comeÃ§ando da linha 2 (apÃ³s o header)
            const minutesFromStart = (h - 4) * 60 + m;
            return Math.floor(minutesFromStart / 15) + 2;
        }

        function renderSchedule(dayData) {
            scheduleGridContainer.innerHTML = ''; 
            
            // Ordenar blocos por horÃ¡rio de inÃ­cio
            const sortedShows = [...dayData].sort((a, b) => {
                const aTime = a.start.split(':').map(Number);
                const bTime = b.start.split(':').map(Number);
                const aMinutes = aTime[0] * 60 + aTime[1];
                const bMinutes = bTime[0] * 60 + bTime[1];
                return aMinutes - bMinutes;
            });
            
            // Agrupar por horÃ¡rio de inÃ­cio (arredondado para a hora mais prÃ³xima)
            const timeGroups = {};
            sortedShows.forEach(show => {
                const [h, m] = show.start.split(':').map(Number);
                const hourKey = `${String(h).padStart(2, '0')}h`;
                if (!timeGroups[hourKey]) {
                    timeGroups[hourKey] = [];
                }
                timeGroups[hourKey].push(show);
            });
            
            // Cores por cidade/stage
            const stageColors = {
                1: 'linear-gradient(135deg, var(--accent-yellow), var(--accent-orange))', // Recife
                2: 'linear-gradient(135deg, var(--accent-red), var(--accent-pink))', // Olinda
                3: 'linear-gradient(135deg, var(--accent-blue), var(--accent-green))' // Outros
            };
            
            const cityNames = {
                1: 'Recife',
                2: 'Olinda',
                3: 'Outros'
            };
            
            // Renderizar grupos por horÃ¡rio
            Object.keys(timeGroups).sort().forEach(hourKey => {
                const timeGroup = document.createElement('div');
                timeGroup.classList.add('schedule-time-group');
                
                const timeHeader = document.createElement('div');
                timeHeader.classList.add('schedule-time-header');
                timeHeader.textContent = `ğŸ• ${hourKey}`;
                timeGroup.appendChild(timeHeader);
                
                // Agrupar por cidade dentro do horÃ¡rio
                const cityGroups = {};
                timeGroups[hourKey].forEach(show => {
                    const city = show.cidade || cityNames[show.stage] || 'Outros';
                    if (!cityGroups[city]) {
                        cityGroups[city] = [];
                    }
                    cityGroups[city].push(show);
                });
                
                // Renderizar por cidade
                Object.keys(cityGroups).sort().forEach(city => {
                    const citySection = document.createElement('div');
                    citySection.classList.add('schedule-city-section');
                    
                    const cityHeader = document.createElement('div');
                    cityHeader.classList.add('schedule-city-header');
                    const stageNum = cityGroups[city][0].stage;
                    cityHeader.style.background = stageColors[stageNum];
                    cityHeader.style.color = '#000';
                    cityHeader.textContent = `ğŸ“ ${city}`;
                    citySection.appendChild(cityHeader);
                    
                    const blocksList = document.createElement('div');
                    blocksList.classList.add('schedule-blocks-list');
                    
                    cityGroups[city].forEach(show => {
                const card = document.createElement('div');
                card.classList.add('show-card');
                card.dataset.showId = show.id;
                        card.style.background = stageColors[show.stage];
                
                // Mostrar usuÃ¡rios do servidor
                const attendeesData = allAttendances[show.id] || [];
                
                const attendeesHTML = attendeesData.map(attendee => {
                    if (!attendee) return '';
                    const name = attendee.name || attendee.userId || '?';
                    const initial = name.charAt(0).toUpperCase();
                    
                    if (attendee.avatar) {
                        // Usar background-image simples
                        return `<div class="attendee-bubble" title="${name.replace(/"/g, '&quot;')}" style="background-image: url('${attendee.avatar}'); background-size: cover; background-position: center; background-color: #ff7eb9;"></div>`;
                    }
                    return `<div class="attendee-bubble" style="background: linear-gradient(135deg, var(--accent-yellow), var(--accent-red)); display: flex; align-items: center; justify-content: center; font-size: 10px; font-weight: bold; color: #000;" title="${name.replace(/"/g, '&quot;')}">${initial}</div>`;
                }).filter(html => html !== '').join('');
                
                        const localInfo = show.local ? `<div class="text-sm text-white/95 mt-2 font-semibold">ğŸ“ ${show.local}</div>` : '';
                        const timeInfo = `<div class="text-lg font-bold text-black bg-white/40 inline-block px-2 py-1 rounded mt-2">${show.start} - ${show.end}</div>`;
                        
                        card.innerHTML = `
                            <div>
                                <div class="font-bold text-lg mb-2" style="color: white; text-shadow: 2px 2px 0px rgba(0,0,0,0.5);">${show.artist}</div>
                                ${timeInfo}
                                ${localInfo}
                            </div>
                            <div class="attendees-container mt-3">${attendeesHTML}</div>
                        `;
                        
                        blocksList.appendChild(card);
                    });
                    
                    citySection.appendChild(blocksList);
                    timeGroup.appendChild(citySection);
                });
                
                scheduleGridContainer.appendChild(timeGroup);
            });
        }
        
        viewArtistsBtn.addEventListener('click', () => {
            artistsPage.classList.remove('hidden');
            schedulePage.classList.add('hidden');
            viewArtistsBtn.classList.add('active');
            viewScheduleBtn.classList.remove('active');
        });

        viewScheduleBtn.addEventListener('click', () => {
            artistsPage.classList.add('hidden');
            schedulePage.classList.remove('hidden');
            viewArtistsBtn.classList.remove('active');
            viewScheduleBtn.classList.add('active');
            // Ativar quinta-feira por padrÃ£o
            dayButtons.forEach(btn => btn.classList.remove('active'));
            dayThursdayBtn.classList.add('active');
            renderSchedule(scheduleThursday); 
        });
        
        function setActiveDay(activeBtn, schedule) {
            dayButtons.forEach(btn => btn.classList.remove('active'));
            activeBtn.classList.add('active');
            renderSchedule(schedule);
        }
        
        dayThursdayBtn.addEventListener('click', () => setActiveDay(dayThursdayBtn, scheduleThursday));
        dayFridayBtn.addEventListener('click', () => setActiveDay(dayFridayBtn, scheduleFriday));
        daySaturdayBtn.addEventListener('click', () => setActiveDay(daySaturdayBtn, scheduleSaturday));
        daySundayBtn.addEventListener('click', () => setActiveDay(daySundayBtn, scheduleSunday));
        dayMondayBtn.addEventListener('click', () => setActiveDay(dayMondayBtn, scheduleMonday));
        dayTuesdayBtn.addEventListener('click', () => setActiveDay(dayTuesdayBtn, scheduleTuesday));
        dayWednesdayBtn.addEventListener('click', () => setActiveDay(dayWednesdayBtn, scheduleWednesday));

        artistGrid.addEventListener('click', (e) => {
            const cardLink = e.target.closest('.artist-card-link');
            if (!cardLink) return;
            const artistName = cardLink.dataset.artistName;
            const artist = blocosData.find(a => a.name === artistName);
            if (!artist) return;

            document.getElementById('detail-card-container').innerHTML = createArtistDetailCard(artist);
            document.getElementById('detail-artist-name').textContent = artist.name;
            document.getElementById('detail-artist-notes').textContent = artist.details;
            
            mainContent.classList.add('hidden');
            artistDetailPage.classList.remove('hidden');
        });

        backToGridBtn.addEventListener('click', () => {
            mainContent.classList.remove('hidden');
            artistDetailPage.classList.add('hidden');
        });

        let currentModalShowId = null;

        scheduleGridContainer.addEventListener('click', (e) => {
            const card = e.target.closest('.show-card');
            if (!card) return;
            
            const showId = parseInt(card.dataset.showId);
            currentModalShowId = showId;
            const allShows = [...scheduleThursday, ...scheduleFriday, ...scheduleSaturday, ...scheduleSunday, ...scheduleMonday, ...scheduleTuesday, ...scheduleWednesday];
            const show = allShows.find(s => s.id === showId);
            if (!show) return;

            document.getElementById('modal-artist-name').textContent = show.artist;
            document.getElementById('modal-show-time').textContent = `${show.start} - ${show.end}`;
            document.getElementById('modal-show-local').textContent = show.local ? `ğŸ“ ${show.local} - ${show.cidade || ''}` : '';
            
            // Atualizar botÃ£o de presenÃ§a
            const attendBtn = document.getElementById('attend-btn');
            const attendText = document.getElementById('attend-text');
            const isAttending = getAttendanceStatus(showId);
            
            if (isAttending) {
                attendBtn.classList.add('active');
                attendText.textContent = 'Confirmado! âœ“';
            } else {
                attendBtn.classList.remove('active');
                attendText.textContent = 'Marcar presenÃ§a';
            }
            
            // Carregar participantes do servidor
            updateModalAttendees(showId);

            scheduleModal.classList.remove('hidden');
        });
        
        modalCloseBtn.addEventListener('click', () => scheduleModal.classList.add('hidden'));
        scheduleModal.addEventListener('click', (e) => {
            if (e.target === scheduleModal) {
                 scheduleModal.classList.add('hidden');
            }
        });
        
        // --- SISTEMA DE USUÃRIOS E AGENDAMENTO ---
        // API URL - funciona tanto localmente quanto no Vercel
        const API_URL = window.location.origin;
        
        let currentUser = null;
        let userAttendances = {};
        let allAttendances = {}; // Cache de todas as presenÃ§as do servidor

        // FunÃ§Ã£o auxiliar para fazer requisiÃ§Ãµes
        async function apiRequest(endpoint, options = {}) {
            try {
                const response = await fetch(`${API_URL}${endpoint}`, {
                    ...options,
                    headers: {
                        'Content-Type': 'application/json',
                        ...options.headers
                    }
                });
                
                if (!response.ok) {
                    throw new Error(`Erro na API: ${response.status} ${response.statusText}`);
                }
                
                return await response.json();
            } catch (error) {
                console.error('Erro na requisiÃ§Ã£o:', error);
                throw error;
            }
        }

        // Carregar todas as presenÃ§as do servidor
        async function loadAllAttendances() {
            try {
                const response = await apiRequest('/api/attendances');
                
                // Garantir que Ã© um objeto vÃ¡lido
                if (response && typeof response === 'object' && !Array.isArray(response)) {
                    allAttendances = response;
                    // Converter para o formato esperado pelo cÃ³digo existente
                    Object.keys(allAttendances).forEach(showId => {
                        if (Array.isArray(allAttendances[showId])) {
                            userAttendances[showId] = allAttendances[showId].map(a => a && a.userId ? a.userId : a).filter(Boolean);
                        }
                    });
                } else {
                    allAttendances = {};
                }
                
                // Atualizar interface apenas se estiver na pÃ¡gina de programaÃ§Ã£o
                if (!schedulePage.classList.contains('hidden')) {
                    let activeSchedule = scheduleThursday;
                    if (dayThursdayBtn.classList.contains('active')) activeSchedule = scheduleThursday;
                    else if (dayFridayBtn.classList.contains('active')) activeSchedule = scheduleFriday;
                    else if (daySaturdayBtn.classList.contains('active')) activeSchedule = scheduleSaturday;
                    else if (daySundayBtn.classList.contains('active')) activeSchedule = scheduleSunday;
                    else if (dayMondayBtn.classList.contains('active')) activeSchedule = scheduleMonday;
                    else if (dayTuesdayBtn.classList.contains('active')) activeSchedule = scheduleTuesday;
                    else if (dayWednesdayBtn.classList.contains('active')) activeSchedule = scheduleWednesday;
                    renderSchedule(activeSchedule);
                }
            } catch (error) {
                console.error('Erro ao carregar presenÃ§as:', error);
                // Fallback para localStorage
                try {
                    const saved = localStorage.getItem('userAttendances');
                    if (saved) {
                        userAttendances = JSON.parse(saved);
                        // Tentar converter para formato de allAttendances
                        Object.keys(userAttendances).forEach(showId => {
                            if (Array.isArray(userAttendances[showId])) {
                                allAttendances[showId] = userAttendances[showId].map(userId => ({
                                    userId: userId,
                                    name: userId,
                                    avatar: null
                                }));
                            }
                        });
                    } else {
                        userAttendances = {};
                        allAttendances = {};
                    }
                } catch (e) {
                    console.error('Erro ao parsear localStorage:', e);
                    userAttendances = {};
                    allAttendances = {};
                }
            }
        }

        // Salvar usuÃ¡rio no servidor
        async function saveUserToServer(user) {
            try {
                const userId = user.name.toLowerCase().replace(/\s+/g, '');
                await apiRequest('/api/users', {
                    method: 'POST',
                    body: JSON.stringify({
                        id: userId,
                        name: user.name,
                        avatar: user.avatar
                    })
                });
            } catch (error) {
                console.error('Erro ao salvar usuÃ¡rio:', error);
            }
        }

        function saveUserData() {
            // Salvar no localStorage como backup
            localStorage.setItem('currentUser', JSON.stringify(currentUser));
            // Salvar no servidor
            if (currentUser) {
                saveUserToServer(currentUser);
            }
        }

        function loadUserData() {
            const savedUser = localStorage.getItem('currentUser');
            if (savedUser) {
                currentUser = JSON.parse(savedUser);
                updateUserInterface();
                // Sincronizar com servidor
                saveUserToServer(currentUser);
            }
        }

        function updateUserInterface() {
            const loginBtn = document.getElementById('login-btn');
            const userInfo = document.getElementById('user-info');
            
            if (currentUser) {
                loginBtn.style.display = 'none';
                userInfo.style.display = 'flex';
                document.getElementById('user-name').textContent = currentUser.name;
                const avatarImg = document.getElementById('user-avatar');
                if (currentUser.avatar) {
                    avatarImg.src = currentUser.avatar;
                    avatarImg.onerror = function() {
                        this.onerror = null;
                        this.src = 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHZpZXdCb3g9IjAgMCA0MCA0MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMjAiIGN5PSIyMCIgcj0iMjAiIGZpbGw9IiNmZjdlYjkiLz4KPHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4PSI4IiB5PSI4Ij4KPHBhdGggZD0iTTEyIDEyQzE0LjIwOTEgMTIgMTYgMTAuMjA5MSAxNiA4QzE2IDUuNzkwODYgMTQuMjA5MSA0IDEyIDRDOS43OTA4NiA0IDggNS43OTA4NiA4IDhDOCAxMC4yMDkxIDkuNzkwODYgMTIgMTIgMTJaIiBmaWxsPSJ3aGl0ZSIvPgo8cGF0aCBkPSJNMTIgMTRDOC42ODYyOSAxNCA2IDE2LjY4NjMgNiAyMEgxOEMxOCAxNi42ODYzIDE1LjMxMzcgMTQgMTIgMTRaIiBmaWxsPSJ3aGl0ZSIvPgo8L3N2Zz4KPC9zdmc+';
                    };
                } else {
                    avatarImg.src = 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHZpZXdCb3g9IjAgMCA0MCA0MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMjAiIGN5PSIyMCIgcj0iMjAiIGZpbGw9IiNmZjdlYjkiLz4KPHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4PSI4IiB5PSI4Ij4KPHBhdGggZD0iTTEyIDEyQzE0LjIwOTEgMTIgMTYgMTAuMjA5MSAxNiA4QzE2IDUuNzkwODYgMTQuMjA5MSA0IDEyIDRDOS43OTA4NiA0IDggNS43OTA4NiA4IDhDOCAxMC4yMDkxIDkuNzkwODYgMTIgMTIgMTJaIiBmaWxsPSJ3aGl0ZSIvPgo8cGF0aCBkPSJNMTIgMTRDOC42ODYyOSAxNCA2IDE2LjY4NjMgNiAyMEgxOEMxOCAxNi42ODYzIDE1LjMxMzcgMTQgMTIgMTRaIiBmaWxsPSJ3aGl0ZSIvPgo8L3N2Zz4KPC9zdmc+';
                }
            } else {
                loginBtn.style.display = 'block';
                userInfo.style.display = 'none';
            }
        }

        function showLoginModal() {
            const modal = document.getElementById('login-modal');
            modal.classList.remove('hidden');
        }

        function hideLoginModal() {
            const modal = document.getElementById('login-modal');
            modal.classList.add('hidden');
        }

        async function login() {
            const name = document.getElementById('login-name').value.trim();
            const avatarFile = document.getElementById('login-avatar').files[0];
            
            if (!name) {
                alert('Por favor, digite seu nome!');
                return;
            }

            let avatarUrl = 'default-avatar.png';
            if (avatarFile) {
                const reader = new FileReader();
                reader.onload = async function(e) {
                    avatarUrl = e.target.result;
                    currentUser = { name, avatar: avatarUrl };
                    await saveUserData();
                    updateUserInterface();
                    hideLoginModal();
                    // Limpar formulÃ¡rio
                    document.getElementById('login-name').value = '';
                    document.getElementById('login-avatar').value = '';
                    // Recarregar presenÃ§as
                    await loadAllAttendances();
                };
                reader.readAsDataURL(avatarFile);
            } else {
                currentUser = { name, avatar: avatarUrl };
                await saveUserData();
                updateUserInterface();
                hideLoginModal();
                document.getElementById('login-name').value = '';
                // Recarregar presenÃ§as
                await loadAllAttendances();
            }
        }

        function logout() {
            currentUser = null;
            saveUserData();
            updateUserInterface();
        }

        async function toggleAttendance(showId) {
            const targetShowId = showId || currentModalShowId;
            if (!targetShowId) return;
            
            if (!currentUser) {
                showLoginModal();
                return;
            }

            const userId = currentUser.name.toLowerCase().replace(/\s+/g, '');
            
            try {
                // Enviar para o servidor
                const result = await apiRequest('/api/attendances', {
                    method: 'POST',
                    body: JSON.stringify({
                        userId: userId,
                        showId: targetShowId
                    })
                });

                // Atualizar cache local
            if (!userAttendances[targetShowId]) {
                userAttendances[targetShowId] = [];
            }

                if (result.attending) {
                    if (!userAttendances[targetShowId].includes(userId)) {
                        userAttendances[targetShowId].push(userId);
                    }
                } else {
                    const index = userAttendances[targetShowId].indexOf(userId);
                    if (index > -1) {
                        userAttendances[targetShowId].splice(index, 1);
                    }
                }

                // Recarregar todas as presenÃ§as do servidor para ter dados atualizados
                await loadAllAttendances();
                updateShowAttendance(targetShowId);
                
                // Se o modal estiver aberto, atualizar a interface
                if (currentModalShowId === targetShowId) {
                    await updateModalAttendees(targetShowId);
                }
            } catch (error) {
                console.error('Erro ao marcar presenÃ§a:', error);
                // Fallback para localStorage
                if (!userAttendances[targetShowId]) {
                    userAttendances[targetShowId] = [];
                }
            const attendanceIndex = userAttendances[targetShowId].indexOf(userId);
            if (attendanceIndex > -1) {
                userAttendances[targetShowId].splice(attendanceIndex, 1);
            } else {
                userAttendances[targetShowId].push(userId);
            }
                localStorage.setItem('userAttendances', JSON.stringify(userAttendances));
            updateShowAttendance(targetShowId);
            }
        }
            
        // FunÃ§Ã£o para atualizar a lista de participantes no modal
        async function updateModalAttendees(showId) {
                const attendBtn = document.getElementById('attend-btn');
                const attendText = document.getElementById('attend-text');
            const isAttending = getAttendanceStatus(showId);
                
                if (isAttending) {
                    attendBtn.classList.add('active');
                    attendText.textContent = 'Confirmado! âœ“';
                } else {
                    attendBtn.classList.remove('active');
                    attendText.textContent = 'Marcar presenÃ§a';
                }
                
            // Buscar presenÃ§as do servidor para este show
            try {
                const attendees = await apiRequest(`/api/attendances/show/${showId}`);
                const attendeesGrid = document.getElementById('modal-attendees-grid');
                if (!attendeesGrid) return;
                
                attendeesGrid.innerHTML = '';
                
                if (attendees && Array.isArray(attendees) && attendees.length > 0) {
                    attendees.forEach(attendee => {
                        if (!attendee) return;
                        const name = attendee.name || attendee.userId || '?';
                        const initial = name.charAt(0).toUpperCase();
                        if (attendee.avatar) {
                            attendeesGrid.innerHTML += `
                                <div class="text-center">
                                    <img src="${attendee.avatar}" 
                                         class="w-20 h-20 rounded-full object-cover mx-auto border-3" 
                                         style="border-color: var(--accent-yellow); box-shadow: 0 0 15px var(--accent-red);"
                                         alt="${name}"
                                         onerror="this.onerror=null; this.style.display='none'; this.nextElementSibling.style.display='flex';">
                                    <div class="w-20 h-20 rounded-full mx-auto border-3 flex items-center justify-center text-2xl font-bold text-white" 
                                         style="border-color: var(--accent-yellow); background: linear-gradient(135deg, var(--accent-yellow), var(--accent-red)); box-shadow: 0 0 15px var(--accent-blue); display: none;">
                                        ${initial}
                                    </div>
                                    <p class="mt-2 text-sm">${name}</p>
                                </div>`;
                        } else {
                            attendeesGrid.innerHTML += `
                                <div class="text-center">
                                    <div class="w-20 h-20 rounded-full mx-auto border-3 flex items-center justify-center text-2xl font-bold text-white" style="border-color: var(--accent-yellow); background: linear-gradient(135deg, var(--accent-yellow), var(--accent-red)); box-shadow: 0 0 15px var(--accent-blue);">
                                        ${initial}
                                    </div>
                                    <p class="mt-2 text-sm">${name}</p>
                                </div>`;
                        }
                    });
                } else {
                    attendeesGrid.innerHTML = `<p class="col-span-full text-center text-gray-400">NinguÃ©m confirmado para este show ainda.</p>`;
                }
            } catch (error) {
                console.error('Erro ao carregar participantes:', error);
                const attendeesGrid = document.getElementById('modal-attendees-grid');
                if (attendeesGrid) {
                    attendeesGrid.innerHTML = `<p class="col-span-full text-center text-gray-400">Erro ao carregar participantes.</p>`;
                }
            }
        }

        function updateShowAttendance(showId) {
            const allShows = [...scheduleThursday, ...scheduleFriday, ...scheduleSaturday, ...scheduleSunday, ...scheduleMonday, ...scheduleTuesday, ...scheduleWednesday];
            const show = allShows.find(s => s.id === showId);
            if (show) {
                show.attendees = userAttendances[showId] || [];
            }
            
            // Re-renderizar a agenda se estivermos nela
            if (!schedulePage.classList.contains('hidden')) {
                let activeSchedule = scheduleThursday;
                if (dayThursdayBtn.classList.contains('active')) activeSchedule = scheduleThursday;
                else if (dayFridayBtn.classList.contains('active')) activeSchedule = scheduleFriday;
                else if (daySaturdayBtn.classList.contains('active')) activeSchedule = scheduleSaturday;
                else if (daySundayBtn.classList.contains('active')) activeSchedule = scheduleSunday;
                else if (dayMondayBtn.classList.contains('active')) activeSchedule = scheduleMonday;
                else if (dayTuesdayBtn.classList.contains('active')) activeSchedule = scheduleTuesday;
                else if (dayWednesdayBtn.classList.contains('active')) activeSchedule = scheduleWednesday;
                renderSchedule(activeSchedule);
            }
        }

        function getAttendanceStatus(showId) {
            if (!currentUser) return false;
            const userId = currentUser.name.toLowerCase().replace(/\s+/g, '');
            
            // Verificar no allAttendances primeiro (dados do servidor)
            if (allAttendances[showId] && Array.isArray(allAttendances[showId])) {
                return allAttendances[showId].some(a => a.userId === userId);
            }
            
            // Fallback para userAttendances (localStorage)
            return userAttendances[showId] && userAttendances[showId].includes(userId);
        }

        // --- LÃ“GICA DO PLAYER DE MÃšSICA ---
        const musicToggleBtn = document.getElementById('music-toggle-btn');
        const backgroundMusic = document.getElementById('background-music');
        const playIcon = `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8 5v14l11-7z"/></svg>`;
        const pauseIcon = `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"/></svg>`;

        if(musicToggleBtn && backgroundMusic) {
            backgroundMusic.volume = 0.2;
            musicToggleBtn.innerHTML = playIcon;
            
            // Chrome requer interaÃ§Ã£o do usuÃ¡rio antes de tocar Ã¡udio
            let userInteracted = false;
            
            // Detectar primeira interaÃ§Ã£o do usuÃ¡rio
            const enableAudio = () => {
                if (!userInteracted) {
                    userInteracted = true;
                    // Tentar tocar silenciosamente para "desbloquear" o Ã¡udio
                    backgroundMusic.play().catch(err => {
                        console.log('Ãudio bloqueado atÃ© interaÃ§Ã£o do usuÃ¡rio');
                    });
                    backgroundMusic.pause();
                }
            };
            
            // Adicionar listeners para detectar interaÃ§Ã£o
            ['click', 'touchstart', 'keydown'].forEach(event => {
                document.addEventListener(event, enableAudio, { once: true });
            });

            musicToggleBtn.addEventListener('click', async () => {
                enableAudio();
                
                try {
                    if (backgroundMusic.paused) {
                        await backgroundMusic.play();
                        musicToggleBtn.innerHTML = pauseIcon;
                    } else {
                        backgroundMusic.pause();
                        musicToggleBtn.innerHTML = playIcon;
                    }
                } catch (error) {
                    console.error('Erro ao tocar mÃºsica:', error);
                    // Se falhar, mostrar mensagem ao usuÃ¡rio
                    if (error.name === 'NotAllowedError') {
                        alert('Por favor, clique em qualquer lugar da pÃ¡gina primeiro para permitir o Ã¡udio.');
                    }
                }
            });
        }

        window.onload = async () => {
            try {
                displayArtists(blocosData);
                loadUserData();
                
                // Carregar todas as presenÃ§as do servidor
                await loadAllAttendances();
                
                // Atualizar interface periodicamente (a cada 5 segundos)
                setInterval(async () => {
                    try {
                        await loadAllAttendances();
                    } catch (error) {
                        console.error('Erro ao atualizar presenÃ§as:', error);
                    }
                }, 5000);
            } catch (error) {
                console.error('Erro ao inicializar:', error);
            }
        };
    </script>
</body>
</html>

